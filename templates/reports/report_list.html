{% extends 'base.html' %}
{% block title %}日報一覧{% endblock %}
{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>日報一覧</h1>
        <a href="{% url 'report_create' %}" class="btn btn-primary">新しい日報を投稿する</a>
    </div>
    
    {% for report in reports %}
        <a href="{{ report.get_absolute_url }}" class="card mb-3 text-decoration-none text-dark">
            <div class="card-header d-flex justify-content-between">
                <span>
                    <strong>{{ report.customer_name }}</strong>
                    {% if report.deal_name %}({{ report.deal_name }}){% endif %}
                </span>
                <small class="text-muted">{{ report.work_date|date:"Y/m/d" }}</small>
            </div>
            <div class="card-body">
                <p class="card-text">{{ report.work_details|linebreaks|truncatewords:50 }}</p>
            </div>
            <div class="card-footer text-muted d-flex justify-content-between">
                <span>報告者: {{ report.author.username }}</span>
                <span>進捗: {{ report.get_progress_status_display }}</span>
            </div>
        </a>
    {% empty %}
        <div class="alert alert-info">まだ日報はありません。</div>
    {% endfor %}
{% endblock %}