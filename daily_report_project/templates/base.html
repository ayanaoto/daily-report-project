{% load static %} 
<!DOCTYPE html>
<html lang="ja" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <title>{% block title %}{{ site_brand|default:"FieldNote" }}{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      /* ===============================
         High-Contrast Global Theme
         ・磯・濶ｲ縺縺大ｼｷ蛹悶よｧ矩縺ｯ螟画峩縺励↑縺・ｼ・
      ================================ */
      :root{
        /* 蝓ｺ譛ｬ繧ｫ繝ｩ繝ｼ */
        --fn-page-bg: #ffffff;          /* 繝壹・繧ｸ閭梧勹 */
        --fn-text:    #0b0f14;          /* 縺ｻ縺ｼ鮟・*/
        --fn-muted:   #4b5563;          /* 隱ｬ譏取枚縺ｪ縺ｩ */
        --fn-border:  #d5dee7;          /* 讓呎ｺ匁棧邱・*/

        /* 邂｡逅・判髱｢蟇・ｊ繧ｭ繝ｼ濶ｲ */
        --fn-header:  #417690;          /* 繝翫ン縺ｮ蟶ｯ濶ｲ */
        --fn-accent:  #79aec8;          /* 隕句・縺・繝懊ち繝ｳ */
        --fn-accent-2:#2a6078;          /* 繧ゅ≧蟆代＠豼・＞蟶ｯ */
        --fn-accent-h:#195c77;          /* 繝帙ヰ繝ｼ譎・*/

        /* 蜈･蜉帷ｳｻ・育區蝨ｰ・区ｿ・＞譁・ｭ暦ｼ九￥縺｣縺阪ｊ譫・・*/
        --fn-input-bg:#ffffff;
        --fn-input-tx:#0b0f14;
        --fn-input-bd:#334155;          /* 2px譫縺ｮ濶ｲ */
        --fn-input-ph:#6b7280;          /* placeholder */

        /* 繝ｪ繝ｳ繧ｯ */
        --fn-link:#1f4d66;
        --fn-link-h:#14394d;
      }

      /* 蜈ｨ菴・*/
      body{
        background: var(--fn-page-bg);
        color: var(--fn-text);
      }
      a{ color: var(--fn-link); text-decoration: none; }
      a:hover{ color: var(--fn-link-h); }

      /* 繝倥ャ繝繝ｼ・育ｮ｡逅・判髱｢蟇・ｊ縺ｮ髱堤ｷ托ｼ・*/
      .navbar{
        background: var(--fn-header) !important;
        border-bottom: 0 !important;
      }
      .navbar .navbar-brand,
      .navbar .nav-link{ color:#eef7fb !important; }
      .navbar .nav-link:hover{ color:#ffffff !important; }

      /* 繧ｫ繝ｼ繝・蛹ｺ蛻・ｊ */
      .card{ background:#fff; border:1px solid var(--fn-border); }
      .card-header{
        background: var(--fn-accent);
        border-bottom:0;
        color:#fff;
        font-weight:600;
      }

      /* 蜈･蜉幢ｼ育區蝨ｰ・区ｿ・＞譁・ｭ暦ｼ・px譫・・*/
      .form-control,
      .form-select,
      .input-group-text{
        background: var(--fn-input-bg) !important;
        color: var(--fn-input-tx) !important;
        border: 2px solid var(--fn-input-bd) !important;
      }
      .form-control::placeholder{ color: var(--fn-input-ph) !important; }
      .form-control:focus,
      .form-select:focus{
        outline:0;
        border-color: var(--fn-accent-2) !important;
        box-shadow: 0 0 0 .2rem rgba(41,97,120,.20);
      }
      .form-label{ color:#0f172a; font-weight:600; }

      /* 繝懊ち繝ｳ・壼ｽｩ蠎ｦ縺ｯ邯ｭ謖√∵・蠎ｦ繧剃ｸ九￡繧ｳ繝ｳ繝医Λ繧ｹ繝・P */
      .btn-primary{
        background: var(--fn-accent-2) !important;
        border-color: var(--fn-accent-2) !important;
        color:#fff !important;
      }
      .btn-primary:hover{
        background: var(--fn-accent-h) !important;
        border-color: var(--fn-accent-h) !important;
      }
      .btn-success{
        background:#2b6e3f !important;
        border-color:#2b6e3f !important;
        color:#fff !important;
      }
      .btn-success:hover{
        background:#225a33 !important;
        border-color:#225a33 !important;
      }
      .btn-outline-light{
        color:#0f172a !important;
        border-color:#334155 !important;
      }
      .btn-outline-light:hover{
        background:#e6f2f7 !important;
        color:#0b0f14 !important;
      }
      .btn-outline-secondary{
        color:#0f172a !important;
        border-color:#334155 !important;
      }
      .btn-outline-secondary:hover{
        background:#e6f2f7 !important;
        color:#0b0f14 !important;
      }

      /* 繝・・繝悶Ν・壹・繝・ム繝ｼ豼・牡蟶ｯ・倶ｺ､莠定牡 */
      .table{ --bs-table-bg: transparent; }
      .table thead th{
        background: var(--fn-accent-2) !important;
        color:#fff !important;
        border-bottom:0 !important;
      }
      .table-striped > tbody > tr:nth-of-type(odd) > *{
        background:#f6fbff !important;
      }
      .table > :not(caption) > * > *{
        border-bottom:1.5px solid #cbd5e1 !important;
      }

      /* 繝峨Ο繝・・繝繧ｦ繝ｳ縺ｯ逋ｽ蝨ｰ縺ｫ */
      .dropdown-menu{
        background:#ffffff !important;
        border:1px solid var(--fn-border) !important;
      }
      .dropdown-item{ color: var(--fn-text) !important; }
      .dropdown-item:hover{ background:#eef7fb !important; }

      /* 繝舌ャ繧ｸ縺ｪ縺ｩ */
      .badge.bg-primary{ background: var(--fn-accent-2) !important; }

      /* 繝輔ャ繧ｿ繝ｼ */
      footer{ color: var(--fn-muted); }
      .chip{
        display:inline-block; padding:.25rem .5rem;
        border:1px solid var(--fn-border); border-radius:9999px;
        background:#fff; color:#333;
      }
      .page-title{ font-weight:800; color:#0f172a; letter-spacing:.02em; }
      .shadow-soft{ box-shadow: 0 10px 30px rgba(0,0,0,.12); }

      /* ====== empty/alert 繧堤區蝨ｰ繝ｻ豼・枚蟄励↓邨ｱ荳・磯ｻ貞ｸｯ蟇ｾ遲厄ｼ・====== */
      .alert{
        background:#ffffff !important;
        color:#0b0f14 !important;
        border:2px solid var(--fn-border) !important;
      }
      .alert.alert-dark,
      .alert.text-bg-dark,
      .alert.bg-dark{
        background:#ffffff !important;
        color:#0b0f14 !important;
        border-color:var(--fn-border) !important;
      }
      /* 繧ゅ＠遨ｺ陦ｨ遉ｺ縺ｮ迢ｬ閾ｪ繧ｯ繝ｩ繧ｹ縺後≠繧後・縺ｾ縺ｨ繧√※逋ｽ蛹・*/
      .empty-state,
      .list-empty,
      .table-empty,
      .no-data,
      .result-empty{
        background:#ffffff !important;
        color:#0b0f14 !important;
        border:2px solid var(--fn-border) !important;
      }
      /* 繧ｳ繝ｳ繝・リ/繧ｫ繝ｼ繝牙・縺ｫ谿九ｋ .bg-dark 邉ｻ繧堤區蛹厄ｼ井ｿ晞匱・・*/
      .container :is(.bg-dark,.text-bg-dark),
      .card :is(.bg-dark,.text-bg-dark){
        background:#ffffff !important;
        color:#0b0f14 !important;
        border:2px solid var(--fn-border) !important;
      }

      /* ===== File input 繧定埋縺・ｷ醍ｳｻ縺ｫ・医・繧ｿ繝ｳ縺ｮ縺ｿ濶ｲ螟画峩・・===== */
      .form-control[type="file"]{
        background:#ffffff !important;
        color:#0b0f14 !important;
        border:2px solid var(--fn-input-bd) !important;
      }
      .form-control[type="file"]::file-selector-button{
        margin-inline-end:.75rem;
        padding:.45rem .9rem;
        border:2px solid #6fbf8b;       /* 邱醍ｳｻ縺ｮ譫 */
        border-radius:.375rem;
        background:#e8f8ee;              /* 阮・＞邱・*/
        color:#0b0f14;
        font-weight:600;
        cursor:pointer;
      }
      /* hover 繧偵ｂ縺｣縺ｨ阮・￥・亥ｾｮ蟾ｮ縺ｫ・・*/
      .form-control[type="file"]:hover::file-selector-button{
        background:#eaf9f2;              /* 縺輔ｉ縺ｫ阮・＞螟牙喧 */
        border-color:#6fbf8b;            /* 騾壼ｸｸ縺ｨ蜷後§譫濶ｲ */
      }
      .form-control[type="file"]:active::file-selector-button{
        background:#d5efdf;
        border-color:#379664;
      }
      /* 莠呈鋤: WebKit */
      input[type="file"]::-webkit-file-upload-button{
        margin-inline-end:.75rem;
        padding:.45rem .9rem;
        border:2px solid #6fbf8b;
        border-radius:.375rem;
        background:#e8f8ee;
        color:#0b0f14;
        font-weight:600;
        cursor:pointer;
      }
      input[type="file"]:hover::-webkit-file-upload-button{
        background:#eaf9f2;              /* 縺輔ｉ縺ｫ阮・＞螟牙喧 */
        border-color:#6fbf8b;
      }
      input[type="file"]:active::-webkit-file-upload-button{
        background:#d5efdf;
        border-color:#379664;
      }
      .form-control[type="file"]:focus{
        border-color:#43a368 !important;
        box-shadow:0 0 0 .2rem rgba(67,163,104,.25) !important;
        outline:0;
      }
    </style>

    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <!-- NAV -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
      <div class="container">
        <a class="navbar-brand fw-bold" href="{% url 'reports:report_list' %}">{{ site_brand|default:"FieldNote" }}</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="{% url 'reports:report_list' %}">譌･蝣ｱ荳隕ｧ</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'reports:customer_list' %}">鬘ｧ螳｢</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'reports:deal_list' %}">譯井ｻｶ</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'reports:troubleshooting_list' %}">繝医Λ繝悶Ν繧ｷ繝･繝ｼ繝・/a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'reports:todo_list' %}">ToDo</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'reports:voice_logger' %}">髻ｳ螢ｰ繝ｭ繧ｰ</a></li>
          </ul>

          <div class="d-flex align-items-center gap-2">
            <a class="btn btn-success" href="{% url 'reports:report_create' %}">・・譌･蝣ｱ</a>

            {% if request.user.is_authenticated %}
              <div class="dropdown">
                <button class="btn btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                  {{ request.user.username|default:"繝ｦ繝ｼ繧ｶ繝ｼ" }}
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li><a class="dropdown-item" href="{% url 'reports:profile' %}">繝励Ο繝輔ぅ繝ｼ繝ｫ</a></li>
                  {% if request.user.is_staff %}
                  <li><a class="dropdown-item" href="{% url 'admin:index' %}">邂｡逅・し繧､繝・/a></li>
                  {% endif %}
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <form action="{% url 'logout' %}" method="post" class="px-2 py-1">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-sm btn-outline-light w-100">繝ｭ繧ｰ繧｢繧ｦ繝・/button>
                    </form>
                  </li>
                </ul>
              </div>
            {% else %}
              <a class="btn btn-outline-light" href="{% url 'login' %}">繝ｭ繧ｰ繧､繝ｳ</a>
              <a class="btn btn-primary" href="{% url 'reports:signup' %}">譁ｰ隕冗匳骭ｲ</a>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

    <!-- CONTENT -->
    <main class="container py-4">
      {% block content %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer class="border-top py-4 mt-4">
      <div class="container d-flex justify-content-between small">
        <span>ﾂｩ {{ site_brand|default:"FieldNote" }}</span>
        <span class="chip">v1.0</span>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
  </body>
</html>

